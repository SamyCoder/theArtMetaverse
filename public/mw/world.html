<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>MirrorWorlds</title>

    
    <link rel="stylesheet" type="text/css" href="map.css">
    <script type='text/javascript' src='map.js'> </script>
    <script type='text/javascript' src='artworkAudio.js'> </script>
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>

    <script type='text/javascript' src='http://www.x3dom.org/download/x3dom.js'> </script> 
    <!-- <script type='text/javascript' src='x3dom/x3dom.js'> </script> 
    <link rel='stylesheet' type='text/css' href='x3dom/x3dom.css'></link> -->
    <link rel='stylesheet' type='text/css' href='http://www.x3dom.org/download/x3dom.css'></link> 
    <link rel="stylesheet" type="text/css" href="world.css">
    <link rel="stylesheet" type="text/css" href="artworkAudio.css">
    
    <link rel="stylesheet" href="chatProximity.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    
    <link rel="shortcut icon" href="#">
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="webClient.js"></script>
    
    <script>
        function toggleAudio(){
            var audio = document.getElementById("audio-container");
            var audio_btn = document.getElementById("audio-btn");
            audio.classList.toggle("displayele");
            audio_btn.classList.toggle("hideele")
        }
    </script>
    
</head>

<body onload = "init()">
    
    <section>
        <div id="sceneContainer" class="one-edge-shadow">
            <X3D id="x3dContent">
                <Scene>

                    <Viewpoint id="first" position="0 1.7 0" orientation="0 0 0 1" description="camera"></Viewpoint>
                    <Viewpoint id="top-checkpoint" position="2 11 -16" orientation="0 1 0 3" description="camera"></Viewpoint>

                    <Viewpoint id="end-checkpoint" position="0 1.7 20" orientation="0 0 0 1" description="camera"></Viewpoint>
                    <Viewpoint viewAll="true" id="bird-eye-view-rot" position="0 80 40" orientation="-.5 -.5 -.5 2" description="camera"></Viewpoint>

                    <!-- <Viewpoint viewAll="true" id="bird-eye-view" position="26.37592940743272 68.12881939389209 -0.9537453133555437" orientation="-0.4450825579205132 0.7327016413576809 0.5148298955836703 2" description="camera"></Viewpoint> -->

                    <Viewpoint id="right" position="5 -1 2" orientation="0 0 0 1" description="camera"></Viewpoint> 
                    <Viewpoint id="left" position="-13 0 -5" orientation="1 1 1 1" description="camera"></Viewpoint>
                    <Viewpoint id="PostAp" position="-0.45 2.933 -6.712" orientation="0 0 0 1" description="camera"></Viewpoint>
                    <Viewpoint id="Cat" position="-0.06069594805752812 2.9027854440789205 13.938474069604464" orientation="0 0 0 1" description="camera"></Viewpoint>
                    <Viewpoint id="Ghostperson" position="0.13437022638071533 2.294589890452815 0.40465204520591314" orientation="0 1 0 -1.5" description="camera"></Viewpoint>
                    <Viewpoint id="Maskcat" position="0.13437022638071533 2.294589890452815 0.40465204520591314" orientation="0 1 0 1.5" description="camera"></Viewpoint>


                    <inline id=mw_model nameSpaceName=mw></inline>
                    <Group id="avatarGroup"></Group>
                </Scene>
            </X3D>
        </div>
        <div id="bottomBar">

            <b>People currently observing this model:</b>
            <span id="users">Loading...</span>
        </div>
        <div id="artWorkAudioId" class="artWorkAudio">
            This is where the art audio goes!!
            <br/>
            <button class="close_artwork_info_btn" id="close_info_btn"> Close </button>

            <br/>
            
            <button class="button" id="left_btn1"> <img src="./images/backArr.png" id="left_btn2"> </button>            
            <img id="sampleArt" class="art" src="../glTF_X3D_HTML_DOM/Sponza/maskcat.jpg" alt="Sample Art">
            <button class="button" id="right_btn1"> <img src="./images/forwardArr.png" id="right_btn2"> </button>
            
            

            <!-- <X3D id="x3dContent">
                <Scene>
                    <Viewpoint id="Cat" position="5 -1 2" orientation="0 0 0 1" description="camera"></Viewpoint>
                    <Viewpoint id="Maskcat" position="-13 0 -5" orientation="1 1 1 1" description="camera"></Viewpoint>
                    <Viewpoint id="Ghostperson" position="3.2 1.84 1.14" orientation="1 1 1 1" description="camera"></Viewpoint>
                    <Viewpoint id="PostAp" position="-13 0 -5" orientation="1 1 1 1" description="camera"></Viewpoint>
                    <inline id=mw_model nameSpaceName=mw></inline>
                    <Group id="avatarGroup"></Group>
                </Scene>
            </X3D> -->

            <br/>  

            <div id="audio-btn" class="audio-btn-c">
                <!-- <a href="https://www.flaticon.com/free-icons/speaker" title="speaker icons">Speaker icons created by Freepik - Flaticon</a> -->
                <button id="sound" class="button child" onclick="toggleAudio()"><img src="\mw\images\speaker-filled-audio-tool.png" id="soundimg"></button>
            </div>
    
            <div id="audio-container" class="audio-content">
                <div class="audio-header">
                    <h4 class="audio-title">Narration</h4>
                </div>
                <div class="audio-body">
                    <audio id="audio-player" controls controller>
                        <source id="audio-source" src="\mw\sounds\Ghostperson.wav" type="audio/wav">
                        Your browser does not support the audio element.
                    </audio>
                </div>
                <div class="audio-footer">
                    <button type="button" class="btn btn-default" onclick="toggleAudio()">Close</button>
                </div>
            </div>          
        </div>
    </section>
        
    <div id="sideBar">
        <div id="widgetSpace">
            
            
            <div class="widget">
                <span class="widgetHeader">Avatars</span>
                <div class="widgetContent">
                    <span>Select an Avatar:<br></span>
                    <select id="selectAvatar">
                        <option value="avatars/DeerAv.x3d">Deer Olive</option>
                        <option value="avatars/boxEm.x3d">Mack</option>
                        <option value="avatars/box.x3d">RBox</option>
                        <option value="avatars/Warrior_aopted.x3d">Warrior</option>
                      	<option value="avatars/XBot_aopted.x3d">XBot</option>
                        <option value="avatars/YBot_aopted.x3d">YBot</option>
                    </select>
                </div>
            </div> 
            <div id="chat" class="widget scroll" style="height: 83%;">
                <span class="widgetHeader">Chat Window</span>
                <ul id="messages"></ul>
                <input id="inputField" autocomplete="off" />
                <button id="sendButton">Send</button>
            </div>         
        </div>
        
        <button id="maxButton" title="show toolbar" class="minmaxB shadow inactive">
            <b> &gt; </b>
        </button>
        <button id="minButton" title="hide toolbar" class="minmaxB active">
            <b> &lt; </b>
        </button>
    </div>

    <div class="private-chat">
        <input type="checkbox" id="clickP">
        <label for="clickP">
        <i class="fab fa-facebook-messenger"></i>
        <i class="fas fa-times"></i>
        </label>
        <div class="wrapper">
           <div class="head-text">
              Talk Privately with users online 
              <select id="online-user-list">
                <option value="private-user-choose">Users Online</option>
              </select>
              <!-- <script>
                  var onlineUser = getElementById("users");
                  console.log("I am the users list: ", onlineUser.children);
              </script> -->
              
            </div>
           <div class="chat-box">
              <div class="chat-Area">
                  <input id="privateInputField" autocomplete="off" style="width: 250px;"/>
                  <button id="privateSendButton">Send</button>
              </div>
           </div>
        </div>
      </div>

    <div id="map">
        <!-- <button id="modal-map-open" onclick="openMap()"> Map &#128739;</button> -->
        <!-- Map button -->
        <i class='bx bxs-map-alt bx-md bx-tada-hover' id="modal-map-open" onclick="openMap()">Map</i>
    </div>


    <!-- MAP DIALOG BOX -->
    <!-- TODO: Place actual Map + make pretty with icons -->
    <div id="modal-map" class="modal">
        <div class="modal-content">
            <div class="close-map-button">
                <button id="map-back" onclick="closeMap()">  <img src="images/close.png" alt="Close"></img> </button>
            </div>
            <h1> MAP </h1>

                    <div id="sceneContainer-map" class="one-edge-shadow">
                        <X3D id="x3dContent-map">
                            <Scene type="None" disableDoubleClick="true" disableRightDrag="true" height="20%">
                                <Viewpoint id="bird-eye-view-map" position="0 1.7 0" description="camera"></Viewpoint>
                                <Viewpoint  viewAll="true" id="bird-eye-view-map-true" position="0 80 30" orientation="-1 -1 -1 2" description="camera"></Viewpoint>
                                                                
                                <transform rotation="0 1 0 1.5" translation="0 50 20" render="true" visible="true" bboxcenter="0,0,0" bboxsize="-1,-1,-1" center="0,0,0" scale="2,3,2" scaleorientation="0,0,0,0">
                                    <inline id="checkpoint-end-one" url="checkred.x3d" render="true" visible="true" bboxcenter="0,0,0" bboxsize="-1,-1,-1" load="true" namespacename="" ispickable="true"></inline>
                                </transform>
                                <transform id="checkpoint-top-two" rotation="0 1 0 1.5" translation="2 0 -16" render="true" visible="true" bboxcenter="0,0,0" bboxsize="-1,-1,-1" center="0,0,0" scale="2,3,2" scaleorientation="0,0,0,0">
                                    <inline url="checkred.x3d" render="true" visible="true" bboxcenter="0,0,0" bboxsize="-1,-1,-1" load="true" namespacename="" ispickable="true"></inline>
                                </transform>

                                <inline url="/../glTF_X3D_HTML_DOM/Sponza/artworld.x3d"></inline>
                            </Scene>
                        </X3D>
                    </div>

        </div>
    </div>
    
</body>

</html>
